@base <https://periodo.github.io/edtf-literals/> .

@prefix : <cases/level-2/one-of-set-3.ttl#> .
@prefix edtfo: <edtfo.ttl#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<> a owl:Ontology ;
  owl:imports <edtfo.ttl>
  .

:when a time:Instant ;
  # December 1760, or some later month.
  # Elements immediately preceeding and/or following as well as the elements
  # represented by a double-dot, all have the same precision.
  edtfo:atEDTFTime "[1760-12..]" ;
  a :PossibleTime
  .

:PossibleTime a owl:Class ;
  rdfs:subClassOf time:Instant ;
  # either in December 1760, or in some later month
  owl:disjointUnionOf (
    :TimeIn1760_12
    :TimeInSomeMonthAfter1760_12
    ) ;
  # not in more than one later month
  rdfs:subClassOf [
    a owl:Restriction ;
    owl:maxQualifiedCardinality 1 ;
    owl:onProperty time:inDateTime ;
    owl:onClass :SomeMonthAfter1760_12
    ]
  .

# # If the set of possible times is closed, include the following axiom.
# [
#     a owl:Restriction ;
#     owl:onProperty [ owl:inverseOf time:inDateTime ] ;
#     owl:hasValue :when
# ]
# owl:equivalentClass
# [
#     a owl:Class ;
#     owl:unionOf (
#       :1760_12
#       :SomeMonthAfter1760_12
#       )
# ]
# .

:TimeIn1760_12 a owl:Class ;
  rdfs:subClassOf time:Instant ;
  owl:equivalentClass [
    a owl:Restriction ;
    owl:onProperty time:inDateTime ;
    owl:someValuesFrom :1760_12
    ]
  .

:TimeInSomeMonthAfter1760_12 a owl:Class ;
  rdfs:subClassOf time:Instant ;
  owl:unionOf (
    [
      a owl:Restriction ;
      owl:onProperty time:inDateTime ;
      owl:someValuesFrom :SomeMonthAfter1760_12
      ]
    [
      a owl:Restriction ;
      owl:onProperty time:after ;
      owl:someValuesFrom :TimeIn1760_12
      ]
    )
  .

:MonthPrecisionDescription a owl:Class ;
  owl:intersectionOf (
    time:DateTimeDescription
    [ a owl:Restriction ;
      owl:onProperty time:unitType ;
      owl:hasValue time:unitMonth
      ]
    )
  .

:1760_12 a owl:Class ;
  owl:intersectionOf (
    :MonthPrecisionDescription
    [ a owl:Restriction ;
      owl:onProperty time:year ;
      owl:hasValue 1760
      ]
    [ a owl:Restriction ;
      owl:onProperty time:month ;
      owl:hasValue 12
      ]
    )
  .

:SomeMonthAfter1760_12 a owl:Class ;
  owl:intersectionOf (
    :MonthPrecisionDescription
    [ owl:unionOf (
        # year after 1760
        [ a owl:Restriction ;
          owl:onProperty time:year ;
          owl:someValuesFrom [
            a rdfs:Datatype ;
            owl:onDatatype xsd:integer ;
            owl:withRestrictions ([ xsd:minExclusive 1760 ])
            ]
          ]
        # 1760, month after 12 (should be empty, obviously)
        [ a owl:Class ;
          owl:intersectionOf (
            [ a owl:Restriction ;
              owl:onProperty time:year ;
              owl:hasValue 1760
              ]
            [ a owl:Restriction ;
              owl:onProperty time:month ;
              owl:someValuesFrom [
                a rdfs:Datatype ;
                owl:onDatatype xsd:integer ;
                owl:withRestrictions ([ xsd:minExclusive 12 ])
                ]
              ]
            )
          ]
        )
      ]
    )
  .
